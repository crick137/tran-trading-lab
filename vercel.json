{
  "buildCommand": "npm ci && npm run build",
  "outputDirectory": "dist",

  "functions": {
    "api/**/*.js": { "runtime": "nodejs20.x" }
  },

  "redirects": [
    { "source": "/:path*/", "destination": "/:path*", "permanent": true }
  ],
  "rewrites": [
    { "source": "/api/ping",   "destination": "/api/ping.js" },
    { "source": "/api/:path*", "destination": "/api/app.js" },

    { "source": "/admin/:path*", "destination": "/public/admin/index.html" },

    { "source": "/:path*", "destination": "/index.html" }
  ]
}
